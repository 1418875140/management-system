import{d as G,r as _,J as w,o as H,a as E,c as W,k as V,a4 as e,w as o,f as l,aw as X,a2 as u,O as Y,l as q,aq as Z,ak as ee,a6 as h,al as te,ay as le,az as ne}from"./index-6e278e4c.js";import{_ as oe,a as ae,b as se,E as ie,c as de,d as ue,v as re}from"./search-cb33e234.js";import{E as pe}from"./el-dialog-7225b063.js";import{E as me}from"./el-card-e6cdcab0.js";import{_ as _e}from"./index-bcf158b7.js";import"./el-tooltip-fc220203.js";import{_ as ce}from"./plus-791a9653.js";/* empty css                */import{E as N,a as fe}from"./el-form-item-490b18bc.js";import{g as ge,a as ye,u as ve,b as be,d as ke}from"./index-65c7c1cc.js";import"./refs-4b7a3a14.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./castArray-5e585c79.js";const we={class:"app-container"},Ve={class:"search"},he={class:"flex justify-between"},Ce={class:"dialog-footer"},Ee={name:"student"},Ie=G({...Ee,setup(Ne){const x=_(N),y=_(N),p=_(!1),C=_([]),c=_(0),r=w({visible:!1}),i=w({pageNum:1,pageSize:10}),S=_(),a=w({}),z=w({studentname:[{required:!0,message:"学生姓名不能为空",trigger:"blur"}],studentage:[{required:!0,message:"学生年龄不能为空",trigger:"blur"}],studentaddress:[{required:!0,message:"地址不能为空",trigger:"blur"}]});function f(){p.value=!0,ge(i).then(({data:s})=>{S.value=s.list,c.value=s.total}).finally(()=>{p.value=!1})}function v(){x.value.resetFields(),i.pageNum=1,f()}function D(s){C.value=s.map(t=>t.id)}async function F(s){r.visible=!0,s?(r.title="修改学生",ye(s).then(({data:t})=>{Object.assign(a,t)})):r.title="新增学生"}function b(){r.visible=!1,R()}function R(){y.value.resetFields(),y.value.clearValidate(),a.id=void 0}function T(){y.value.validate(s=>{if(s){const t=a.id;p.value=!0,t?ve(t,a).then(()=>{h.success("修改用户成功"),b(),v()}).finally(()=>p.value=!1):be(a).then(()=>{h.success("新增用户成功"),b(),v()}).finally(()=>p.value=!1)}})}function A(s){const t=[s||C.value].join(",");if(!t){h.warning("请勾选删除项");return}te.confirm("确认删除学生信息?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){ke(t).then(()=>{h.success("删除成功"),v()})})}return H(()=>{f()}),(s,t)=>{const k=le,g=fe,$=oe,d=ne,j=ae,B=N,I=ce,U=se,m=ie,K=de,M=ue,P=_e,L=me,O=pe,Q=re;return E(),W("div",we,[V("div",Ve,[e(B,{ref_key:"queryFormRef",ref:x,model:l(i),inline:!0},{default:o(()=>[e(g,{label:"关键字",prop:"keywords"},{default:o(()=>[e(k,{modelValue:l(i).keywords,"onUpdate:modelValue":t[0]||(t[0]=n=>l(i).keywords=n),placeholder:"",clearable:"",style:{width:"200px"},onKeyup:X(f,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(g,null,{default:o(()=>[e(d,{type:"primary",onClick:f},{default:o(()=>[e($),u("搜索")]),_:1}),e(d,{onClick:v},{default:o(()=>[e(j),u(" 重置")]),_:1})]),_:1})]),_:1},8,["model"])]),e(L,{shadow:"never"},{header:o(()=>[V("div",he,[V("div",null,[e(d,{type:"success",onClick:t[1]||(t[1]=n=>F())},{default:o(()=>[e(I),u("新增")]),_:1}),e(d,{type:"danger",disabled:l(C).length===0,onClick:t[2]||(t[2]=n=>A())},{default:o(()=>[e(U),u("删除")]),_:1},8,["disabled"])])])]),default:o(()=>[Y((E(),q(M,{data:l(S),onSelectionChange:D},{default:o(()=>[e(m,{type:"selection",width:"50",align:"center"}),e(m,{key:"id",label:"编号",align:"center",prop:"id",width:"100"}),e(m,{key:"studentName",label:"学生名",align:"center",prop:"studentName"}),e(m,{label:"学生年龄",width:"100",align:"center",prop:"studentAge"}),e(m,{label:"地址",width:"120",align:"center",prop:"studentAddress"}),e(m,{label:"操作",fixed:"right",width:"220"},{default:o(n=>[e(d,{type:"primary",link:"",size:"small",onClick:J=>F(n.row.id)},{default:o(()=>[e(K),u("编辑")]),_:2},1032,["onClick"]),e(d,{type:"primary",link:"",size:"small",onClick:J=>A(n.row.id)},{default:o(()=>[e(U),u("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[Q,l(p)]]),l(c)>0?(E(),q(P,{key:0,total:l(c),"onUpdate:total":t[3]||(t[3]=n=>Z(c)?c.value=n:null),page:l(i).pageNum,"onUpdate:page":t[4]||(t[4]=n=>l(i).pageNum=n),limit:l(i).pageSize,"onUpdate:limit":t[5]||(t[5]=n=>l(i).pageSize=n),onPagination:f},null,8,["total","page","limit"])):ee("",!0)]),_:1}),e(O,{title:l(r).title,modelValue:l(r).visible,"onUpdate:modelValue":t[9]||(t[9]=n=>l(r).visible=n),width:"600px","append-to-body":"",onClose:b},{footer:o(()=>[V("div",Ce,[e(d,{type:"primary",onClick:T},{default:o(()=>[u("确 定")]),_:1}),e(d,{onClick:b},{default:o(()=>[u("取 消")]),_:1})])]),default:o(()=>[e(B,{ref_key:"studentFormRef",ref:y,model:l(a),rules:l(z),"label-width":"80px"},null,8,["model","rules"]),e(g,{label:"学生姓名",prop:"studentName"},{default:o(()=>[e(k,{readonly:!!l(a).id,modelValue:l(a).studentName,"onUpdate:modelValue":t[6]||(t[6]=n=>l(a).studentName=n),placeholder:"请输入学生名"},null,8,["readonly","modelValue"])]),_:1}),e(g,{label:"学生年龄",prop:"studentAge"},{default:o(()=>[e(k,{modelValue:l(a).studentAge,"onUpdate:modelValue":t[7]||(t[7]=n=>l(a).studentAge=n),placeholder:"请输入学生年龄"},null,8,["modelValue"])]),_:1}),e(g,{label:"地址",prop:"studentAddress"},{default:o(()=>[e(k,{modelValue:l(a).studentAddress,"onUpdate:modelValue":t[8]||(t[8]=n=>l(a).studentAddress=n),placeholder:"请输入地址"},null,8,["modelValue"])]),_:1})]),_:1},8,["title","modelValue"])])}}});export{Ie as default};
