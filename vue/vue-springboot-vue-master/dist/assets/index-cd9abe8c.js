import{d as ae,r as k,J as v,o as ne,a as d,c as re,k as q,a4 as o,w as l,f as e,aw as de,a2 as r,O as se,l as s,t as ie,ak as p,ac as I,aM as ue,aN as pe,aO as me,aP as _e,aQ as ce,a6 as w,aR as fe,al as ye,aS as be,ay as ge,az as Ve}from"./index-6e278e4c.js";import{_ as he,a as ke,E as ve,g as we,c as Te,b as Ee,d as Ce,v as Ue}from"./search-cb33e234.js";import{E as Ne}from"./el-dialog-7225b063.js";import{E as Oe}from"./el-input-number-eaf8393a.js";import{E as Ie,a as Me}from"./el-radio-86a5f7d7.js";import"./el-tooltip-fc220203.js";import"./el-tree-2d203f22.js";import{E as Be}from"./el-tree-select-36b1753f.js";import{E as Ae}from"./el-card-e6cdcab0.js";import{_ as Le}from"./plus-791a9653.js";/* empty css                */import{E as M,a as xe}from"./el-form-item-490b18bc.js";import{S as Fe}from"./index-0f835d7e.js";import{I as Ge}from"./index-d9e7f084.js";import"./refs-4b7a3a14.js";import"./index-d06f9fa4.js";import"./castArray-5e585c79.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./el-divider-334d9933.js";import"./caret-bottom-2b34674e.js";import"./dropdown-13ad8af3.js";var _=(b=>(b.CATALOG="CATALOG",b.MENU="MENU",b.BUTTON="BUTTON",b.EXTLINK="EXTLINK",b))(_||{});const Re={class:"app-container"},qe={class:"search"},De={class:"dialog-footer"},Ke={name:"cmenu"},il=ae({...Ke,setup(b){const B=k(M),T=k(M),N=k(!1),f=v({visible:!1}),E=v({}),A=k([]),L=k([]),t=v({parentId:0,visible:1,sort:1,type:_.MENU}),D=v({parentId:[{required:!0,message:"请选择顶级菜单",trigger:"blur"}],name:[{required:!0,message:"请输入菜单名称",trigger:"blur"}],type:[{required:!0,message:"请选择菜单类型",trigger:"blur"}],path:[{required:!0,message:"请输入路由路径",trigger:"blur"}],component:[{required:!0,message:"请输入组件完整路径",trigger:"blur"}]}),K=k(),C=v({type:"",path:""});function y(){N.value=!0,pe(E).then(({data:m})=>{A.value=m}).then(()=>{N.value=!1})}function S(){B.value.resetFields(),y()}function X(m){K.value=m.id}function O(m,n){me().then(({data:i})=>{L.value=[{value:0,label:"顶级菜单",children:i}]}).then(()=>{f.visible=!0,n?(f.title="编辑菜单",_e(n).then(({data:i})=>{Object.assign(t,i),C.type=i.type,C.path=i.path??""})):(f.title="新增菜单",t.parentId=m)})}function z(){t.type!==C.type?t.path="":t.path=C.path}function $(){T.value.validate(m=>{if(m){const n=t.id;n?ce(n,t).then(()=>{w.success("修改成功"),U(),y()}):fe(t).then(()=>{w.success("新增成功"),U(),y()})}})}function Q(m){if(!m)return w.warning("请勾选删除项"),!1;ye.confirm("确认删除已选中的数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{be(m).then(()=>{w.success("删除成功"),y()})}).catch(()=>w.info("已取消删除"))}function U(){f.visible=!1,P()}function P(){T.value.resetFields(),T.value.clearValidate(),t.id=void 0,t.parentId=0,t.visible=1,t.sort=1}return ne(()=>{y()}),(m,n)=>{const i=ge,u=xe,j=he,c=Ve,J=ke,x=M,F=Le,g=ve,V=we,H=Te,W=Ee,Y=Ce,Z=Ae,ee=Be,h=Ie,G=Me,le=Oe,te=Ne,oe=Ue;return d(),re("div",Re,[q("div",qe,[o(x,{ref_key:"queryFormRef",ref:B,model:e(E),inline:!0},{default:l(()=>[o(u,{label:"关键字",prop:"keywords"},{default:l(()=>[o(i,{modelValue:e(E).keywords,"onUpdate:modelValue":n[0]||(n[0]=a=>e(E).keywords=a),placeholder:"菜单名称",clearable:"",onKeyup:de(y,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),o(u,null,{default:l(()=>[o(c,{type:"primary",onClick:y},{icon:l(()=>[o(j)]),default:l(()=>[r("搜索")]),_:1}),o(c,{onClick:S},{icon:l(()=>[o(J)]),default:l(()=>[r(" 重置")]),_:1})]),_:1})]),_:1},8,["model"])]),o(Z,{shadow:"never"},{header:l(()=>[o(c,{type:"success",onClick:n[1]||(n[1]=a=>O(0))},{icon:l(()=>[o(F)]),default:l(()=>[r(" 新增")]),_:1})]),default:l(()=>[se((d(),s(Y,{data:e(A),"highlight-current-row":"","tree-props":{children:"children",hasChildren:"hasChildren"},onRowClick:X,"row-key":"id","default-expand-all":"",border:""},{default:l(()=>[o(g,{label:"菜单名称","min-width":"200"},{default:l(a=>[o(Fe,{"icon-class":a.row.type===e(_).BUTTON?"button":a.row.icon},null,8,["icon-class"]),r(" "+ie(a.row.name),1)]),_:1}),o(g,{label:"菜单类型",align:"center",width:"150"},{default:l(a=>[a.row.type===e(_).CATALOG?(d(),s(V,{key:0,type:"warning"},{default:l(()=>[r("目录")]),_:1})):p("",!0),a.row.type===e(_).MENU?(d(),s(V,{key:1,type:"success"},{default:l(()=>[r("菜单")]),_:1})):p("",!0),a.row.type===e(_).BUTTON?(d(),s(V,{key:2,type:"danger"},{default:l(()=>[r("按钮")]),_:1})):p("",!0),a.row.type===e(_).EXTLINK?(d(),s(V,{key:3,type:"info"},{default:l(()=>[r("外链")]),_:1})):p("",!0)]),_:1}),o(g,{label:"权限标识",align:"center",width:"200",prop:"perm"}),o(g,{label:"状态",align:"center",width:"150"},{default:l(a=>[a.row.visible===1?(d(),s(V,{key:0,type:"success"},{default:l(()=>[r("显示")]),_:1})):(d(),s(V,{key:1,type:"info"},{default:l(()=>[r("隐藏")]),_:1}))]),_:1}),o(g,{label:"排序",align:"center",width:"100",prop:"sort"}),o(g,{fixed:"right",align:"center",label:"操作",width:"220"},{default:l(a=>[a.row.type=="CATALOG"||a.row.type=="MENU"?(d(),s(c,{key:0,type:"primary",link:"",size:"small",onClick:I(R=>O(a.row.id),["stop"])},{default:l(()=>[o(F),r("新增 ")]),_:2},1032,["onClick"])):p("",!0),o(c,{type:"primary",link:"",size:"small",onClick:I(R=>O(void 0,a.row.id),["stop"])},{default:l(()=>[o(H),r("编辑 ")]),_:2},1032,["onClick"]),o(c,{type:"primary",link:"",size:"small",onClick:I(R=>Q(a.row.id),["stop"])},{default:l(()=>[o(W),r(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[oe,e(N)]])]),_:1}),o(te,{title:e(f).title,modelValue:e(f).visible,"onUpdate:modelValue":n[14]||(n[14]=a=>e(f).visible=a),onClose:U,"destroy-on-close":"",appendToBody:"",width:"750px"},{footer:l(()=>[q("div",De,[o(c,{type:"primary",onClick:$},{default:l(()=>[r("确 定")]),_:1}),o(c,{onClick:U},{default:l(()=>[r("取 消")]),_:1})])]),default:l(()=>[o(x,{ref_key:"menuFormRef",ref:T,model:e(t),rules:e(D),"label-width":"100px"},{default:l(()=>[o(u,{label:"父级菜单",prop:"parentId"},{default:l(()=>[o(ee,{modelValue:e(t).parentId,"onUpdate:modelValue":n[2]||(n[2]=a=>e(t).parentId=a),placeholder:"选择上级菜单",data:e(L),filterable:"","check-strictly":"","render-after-expand":!1},null,8,["modelValue","data"])]),_:1}),o(u,{label:"菜单名称",prop:"name"},{default:l(()=>[o(i,{modelValue:e(t).name,"onUpdate:modelValue":n[3]||(n[3]=a=>e(t).name=a),placeholder:"请输入菜单名称"},null,8,["modelValue"])]),_:1}),o(u,{label:"菜单类型",prop:"type"},{default:l(()=>[o(G,{modelValue:e(t).type,"onUpdate:modelValue":n[4]||(n[4]=a=>e(t).type=a),onChange:z},{default:l(()=>[o(h,{label:"CATALOG"},{default:l(()=>[r("目录")]),_:1}),o(h,{label:"MENU"},{default:l(()=>[r("菜单")]),_:1}),o(h,{label:"BUTTON"},{default:l(()=>[r("按钮")]),_:1}),o(h,{label:"EXTLINK"},{default:l(()=>[r("外链")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(t).type=="EXTLINK"?(d(),s(u,{key:0,label:"外链地址",prop:"path"},{default:l(()=>[o(i,{modelValue:e(t).path,"onUpdate:modelValue":n[5]||(n[5]=a=>e(t).path=a),placeholder:"请输入外链完整路径"},null,8,["modelValue"])]),_:1})):p("",!0),e(t).type=="CATALOG"||e(t).type=="MENU"?(d(),s(u,{key:1,label:"路由路径",prop:"path"},{default:l(()=>[e(t).type=="CATALOG"?(d(),s(i,{key:0,modelValue:e(t).path,"onUpdate:modelValue":n[6]||(n[6]=a=>e(t).path=a),placeholder:"/system  (目录以/开头)"},null,8,["modelValue"])):(d(),s(i,{key:1,modelValue:e(t).path,"onUpdate:modelValue":n[7]||(n[7]=a=>e(t).path=a),placeholder:"user"},null,8,["modelValue"]))]),_:1})):p("",!0),e(t).type==e(_).MENU?(d(),s(u,{key:2,label:"页面路径",prop:"component"},{default:l(()=>[o(i,{modelValue:e(t).component,"onUpdate:modelValue":n[8]||(n[8]=a=>e(t).component=a),placeholder:"system/user/index",style:{width:"95%"}},ue({_:2},[e(t).parentId!=0?{name:"prepend",fn:l(()=>[r("src/views/")]),key:"0"}:void 0,e(t).parentId!=0?{name:"append",fn:l(()=>[r(".vue")]),key:"1"}:void 0]),1032,["modelValue"])]),_:1})):p("",!0),e(t).type=="BUTTON"?(d(),s(u,{key:3,label:"权限标识",prop:"perm"},{default:l(()=>[o(i,{modelValue:e(t).perm,"onUpdate:modelValue":n[9]||(n[9]=a=>e(t).perm=a),placeholder:"sys:user:add"},null,8,["modelValue"])]),_:1})):p("",!0),e(t).type!=="BUTTON"?(d(),s(u,{key:4,label:"图标",prop:"icon"},{default:l(()=>[o(Ge,{modelValue:e(t).icon,"onUpdate:modelValue":n[10]||(n[10]=a=>e(t).icon=a)},null,8,["modelValue"])]),_:1})):p("",!0),e(t).type==e(_).CATALOG?(d(),s(u,{key:5,label:"跳转路由"},{default:l(()=>[o(i,{modelValue:e(t).redirect,"onUpdate:modelValue":n[11]||(n[11]=a=>e(t).redirect=a),placeholder:"跳转路由"},null,8,["modelValue"])]),_:1})):p("",!0),e(t).type!=="BUTTON"?(d(),s(u,{key:6,label:"状态"},{default:l(()=>[o(G,{modelValue:e(t).visible,"onUpdate:modelValue":n[12]||(n[12]=a=>e(t).visible=a)},{default:l(()=>[o(h,{label:1},{default:l(()=>[r("显示")]),_:1}),o(h,{label:0},{default:l(()=>[r("隐藏")]),_:1})]),_:1},8,["modelValue"])]),_:1})):p("",!0),o(u,{label:"排序",prop:"sort"},{default:l(()=>[o(le,{modelValue:e(t).sort,"onUpdate:modelValue":n[13]||(n[13]=a=>e(t).sort=a),style:{width:"100px"},"controls-position":"right",min:0},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}});export{il as default};
