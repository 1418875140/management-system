import{a as b,c as K,k as D,d as ne,r as y,J as v,o as ie,a4 as t,w as a,f as o,aw as se,a2 as s,O as de,l as w,ac as T,aq as re,ak as pe,a6 as E,al as ue,ay as me,az as _e}from"./index-6e278e4c.js";import{_ as ce,a as fe,b as ge,E as ye,g as ve,c as be,d as Ce,v as Ve}from"./search-cb33e234.js";import{E as ke}from"./el-dialog-7225b063.js";import{E as he,a as we}from"./el-radio-86a5f7d7.js";import{E as Ee}from"./el-card-e6cdcab0.js";import{_ as De}from"./index-bcf158b7.js";import"./el-tooltip-fc220203.js";import{_ as xe}from"./plus-791a9653.js";/* empty css                */import{E as z,a as Ne}from"./el-form-item-490b18bc.js";import{_ as Te,g as ze,a as Ue,u as $e,b as Fe,d as Be}from"./DictData.vue_vue_type_script_setup_true_lang-c0265055.js";import"./refs-4b7a3a14.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./castArray-5e585c79.js";import"./el-input-number-eaf8393a.js";const Re={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},qe=D("path",{fill:"currentColor",d:"M192 736h640V128H256a64 64 0 0 0-64 64v544zm64-672h608a32 32 0 0 1 32 32v672a32 32 0 0 1-32 32H160l-32 57.536V192A128 128 0 0 1 256 64z"},null,-1),Me=D("path",{fill:"currentColor",d:"M240 800a48 48 0 1 0 0 96h592v-96H240zm0-64h656v160a64 64 0 0 1-64 64H240a112 112 0 0 1 0-224zm144-608v250.88l96-76.8l96 76.8V128H384zm-64-64h320v381.44a32 32 0 0 1-51.968 24.96L480 384l-108.032 86.4A32 32 0 0 1 320 445.44V64z"},null,-1),Se=[qe,Me];function He(L,x){return b(),K("svg",Re,Se)}const Ie={name:"ep-collection",render:He},Ke={class:"app-container"},Le={class:"search"},Pe={class:"dialog-footer"},je={name:"dictType"},it=ne({...je,setup(L){const x=y(z),V=y(z),m=y(!1),N=y([]),C=y(0),d=v({pageNum:1,pageSize:10}),U=y(),p=v({visible:!1}),i=v({status:1}),P=v({name:[{required:!0,message:"请输入字典类型名称",trigger:"blur"}],code:[{required:!0,message:"请输入字典类型编码",trigger:"blur"}]});function u(){m.value=!0,ze(d).then(({data:n})=>{U.value=n.list,C.value=n.total}).finally(()=>{m.value=!1})}function $(){x.value.resetFields(),d.pageNum=1,u()}function j(n){N.value=n.map(e=>e.id)}function F(n){p.visible=!0,n?(p.title="修改字典类型",Ue(n).then(({data:e})=>{Object.assign(i,e)})):p.title="新增字典类型"}function A(){m.value=!1,V.value.validate(n=>{if(n){const e=i.id;e?$e(e,i).then(()=>{E.success("修改成功"),k(),u()}).finally(()=>m.value=!1):Fe(i).then(()=>{E.success("新增成功"),k(),u()}).finally(()=>m.value=!1)}})}function k(){p.visible=!1,O()}function O(){V.value.resetFields(),V.value.clearValidate(),i.id=void 0,i.status=1}function B(n){const e=[n||N.value].join(",");if(!e){E.warning("请勾选删除项");return}ue.confirm("确认删除已选中的数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Be(e).then(()=>{E.success("删除成功"),$()})})}const _=v({visible:!1}),c=v({typeCode:"",typeName:""});function Q(n){_.visible=!0,_.title="【"+n.name+"】字典数据",c.typeCode=n.code,c.typeName=n.name}function G(){_.visible=!1}return ie(()=>{u()}),(n,e)=>{const h=me,f=Ne,J=ce,r=_e,W=fe,R=z,X=xe,q=ge,g=ye,M=ve,Y=Ie,Z=be,ee=Ce,te=De,le=Ee,S=he,oe=we,H=ke,ae=Ve;return b(),K("div",Ke,[D("div",Le,[t(R,{ref_key:"queryFormRef",ref:x,model:o(d),inline:!0},{default:a(()=>[t(f,{label:"关键字",prop:"name"},{default:a(()=>[t(h,{modelValue:o(d).name,"onUpdate:modelValue":e[0]||(e[0]=l=>o(d).name=l),placeholder:"字典类型名称/编码",clearable:"",onKeyup:se(u,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),t(f,null,{default:a(()=>[t(r,{type:"primary",onClick:e[1]||(e[1]=l=>u())},{default:a(()=>[t(J),s("搜索")]),_:1}),t(r,{onClick:e[2]||(e[2]=l=>$())},{default:a(()=>[t(W),s("重置")]),_:1})]),_:1})]),_:1},8,["model"])]),t(le,{shadow:"never"},{header:a(()=>[t(r,{type:"success",onClick:e[3]||(e[3]=l=>F())},{default:a(()=>[t(X),s("新增")]),_:1}),t(r,{type:"danger",disabled:o(N).length===0,onClick:e[4]||(e[4]=l=>B())},{default:a(()=>[t(q),s("删除")]),_:1},8,["disabled"])]),default:a(()=>[de((b(),w(ee,{"highlight-current-row":"",data:o(U),onSelectionChange:j,border:""},{default:a(()=>[t(g,{type:"selection",width:"55",align:"center"}),t(g,{label:"字典类型名称",prop:"name",width:"200"}),t(g,{label:"字典类型编码",prop:"code",width:"200"}),t(g,{label:"状态",align:"center",width:"100"},{default:a(l=>[l.row.status===1?(b(),w(M,{key:0,type:"success"},{default:a(()=>[s("启用")]),_:1})):(b(),w(M,{key:1,type:"info"},{default:a(()=>[s("禁用")]),_:1}))]),_:1}),t(g,{label:"备注",prop:"remark",align:"center"}),t(g,{fixed:"right",label:"操作",align:"center",width:"220"},{default:a(l=>[t(r,{type:"primary",link:"",size:"small",onClick:T(I=>Q(l.row),["stop"])},{default:a(()=>[t(Y),s("字典数据")]),_:2},1032,["onClick"]),t(r,{type:"primary",link:"",size:"small",onClick:T(I=>F(l.row.id),["stop"])},{default:a(()=>[t(Z),s("编辑")]),_:2},1032,["onClick"]),t(r,{type:"primary",link:"",size:"small",onClick:T(I=>B(l.row.id),["stop"])},{default:a(()=>[t(q),s("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[ae,o(m)]]),o(C)>0?(b(),w(te,{key:0,total:o(C),"onUpdate:total":e[5]||(e[5]=l=>re(C)?C.value=l:null),page:o(d).pageNum,"onUpdate:page":e[6]||(e[6]=l=>o(d).pageNum=l),limit:o(d).pageSize,"onUpdate:limit":e[7]||(e[7]=l=>o(d).pageSize=l),onPagination:u},null,8,["total","page","limit"])):pe("",!0)]),_:1}),t(H,{title:o(p).title,modelValue:o(p).visible,"onUpdate:modelValue":e[12]||(e[12]=l=>o(p).visible=l),width:"500px",onClose:k},{footer:a(()=>[D("div",Pe,[t(r,{type:"primary",onClick:A},{default:a(()=>[s("确 定")]),_:1}),t(r,{onClick:k},{default:a(()=>[s("取 消")]),_:1})])]),default:a(()=>[t(R,{ref_key:"dataFormRef",ref:V,model:o(i),rules:o(P),"label-width":"80px"},{default:a(()=>[t(f,{label:"字典名称",prop:"name"},{default:a(()=>[t(h,{modelValue:o(i).name,"onUpdate:modelValue":e[8]||(e[8]=l=>o(i).name=l),placeholder:"请输入字典名称"},null,8,["modelValue"])]),_:1}),t(f,{label:"字典编码",prop:"code"},{default:a(()=>[t(h,{modelValue:o(i).code,"onUpdate:modelValue":e[9]||(e[9]=l=>o(i).code=l),placeholder:"请输入字典编码"},null,8,["modelValue"])]),_:1}),t(f,{label:"状态",prop:"status"},{default:a(()=>[t(oe,{modelValue:o(i).status,"onUpdate:modelValue":e[10]||(e[10]=l=>o(i).status=l)},{default:a(()=>[t(S,{label:1},{default:a(()=>[s("正常")]),_:1}),t(S,{label:0},{default:a(()=>[s("停用")]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(f,{label:"备注",prop:"remark"},{default:a(()=>[t(h,{modelValue:o(i).remark,"onUpdate:modelValue":e[11]||(e[11]=l=>o(i).remark=l),type:"textarea",placeholder:"字典类型备注",autosize:{minRows:2,maxRows:4}},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"]),t(H,{title:o(_).title,modelValue:o(_).visible,"onUpdate:modelValue":e[15]||(e[15]=l=>o(_).visible=l),width:"1000px",onClose:G},{default:a(()=>[t(Te,{typeCode:o(c).typeCode,"onUpdate:typeCode":e[13]||(e[13]=l=>o(c).typeCode=l),typeName:o(c).typeName,"onUpdate:typeName":e[14]||(e[14]=l=>o(c).typeName=l)},null,8,["typeCode","typeName"])]),_:1},8,["title","modelValue"])])}}});export{it as default};
