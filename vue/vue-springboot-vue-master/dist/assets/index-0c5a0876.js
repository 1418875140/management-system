import{aH as g,d as G,r as m,J as V,o as W,a as F,c as X,k as C,a4 as e,w as l,aw as Y,a2 as u,f as q,O as Z,l as z,ak as ee,a6 as E,al as te,ay as ae,az as le}from"./index-6e278e4c.js";import{_ as oe,a as ne,b as re,E as ie,c as se,d as ue,v as de}from"./search-cb33e234.js";import{E as ce}from"./el-dialog-7225b063.js";import{E as pe}from"./el-card-e6cdcab0.js";import{_ as me}from"./index-bcf158b7.js";import"./el-tooltip-fc220203.js";import{_ as _e}from"./plus-791a9653.js";import{E as N,a as fe}from"./el-form-item-490b18bc.js";import"./refs-4b7a3a14.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./castArray-5e585c79.js";function ge(r){return g({url:"/api/teachers/page",method:"get",params:r})}function he(r){return g({url:"/api/teachers/"+r+"/form",method:"get"})}function ve(r){return g({url:"/api/teachers",method:"post",data:r})}function ye(r,h){return g({url:"/api/teachers/"+r,method:"put",data:h})}function be(r){return g({url:"/api/teachers/"+r,method:"delete"})}const ke={class:"app-container"},we={class:"search"},Ve={class:"flex justify-between"},Ce={class:"dialog-footer"},Ee={name:"teacher"},Re=G({...Ee,setup(r){const h=m(N),v=m(N),c=m(!1),x=m([]),y=m(0),d=V({visible:!1}),i=V({pageNum:1,pageSize:10}),T=m(),o=V({}),D=V({teachername:[{required:!0,message:"teacher姓名不能为空",trigger:"blur"}],teacherage:[{required:!0,message:"teacher年龄不能为空",trigger:"blur"}],teacheraddress:[{required:!0,message:"地址不能为空",trigger:"blur"}]});function _(){c.value=!0,ge(i).then(({data:n})=>{T.value=n.list,y.value=n.total}).finally(()=>{c.value=!1})}function b(){h.value.resetFields(),i.pageNum=1,_()}function S(n){x.value=n.map(t=>t.id)}async function A(n){d.visible=!0,n?(d.title="修改教师",he(n).then(({data:t})=>{Object.assign(o,t)})):d.title="新增教师"}function k(){d.visible=!1,R()}function R(){v.value.resetFields(),v.value.clearValidate(),o.id=void 0}function $(){v.value.validate(n=>{if(n){const t=o.id;c.value=!0,t?ye(t,o).then(()=>{E.success("修改用户成功"),k(),b()}).finally(()=>c.value=!1):ve(o).then(()=>{E.success("新增用户成功"),k(),b()}).finally(()=>c.value=!1)}})}function B(n){const t=[n||x.value].join(",");if(!t){E.warning("请勾选删除项");return}te.confirm("确认删除教师信息?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){be(t).then(()=>{E.success("删除成功"),b()})})}return W(()=>{_()}),(n,t)=>{const w=ae,f=fe,j=oe,s=le,I=ne,K=_e,U=re,p=ie,M=se,P=ue,L=me,O=pe,Q=ce,H=de;return F(),X("div",ke,[C("div",we,[e(q(N),{ref_key:"queryFormRef",ref:h,model:i,inline:!0},{default:l(()=>[e(f,{label:"关键字",prop:"keywords"},{default:l(()=>[e(w,{modelValue:i.keywords,"onUpdate:modelValue":t[0]||(t[0]=a=>i.keywords=a),placeholder:"",clearable:"",style:{width:"200px"},onKeyup:Y(_,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(f,null,{default:l(()=>[e(s,{type:"primary",onClick:_},{default:l(()=>[e(j),u("搜索")]),_:1}),e(s,{onClick:b},{default:l(()=>[e(I),u(" 重置")]),_:1})]),_:1})]),_:1},8,["model"])]),e(O,{shadow:"never"},{header:l(()=>[C("div",Ve,[C("div",null,[e(s,{type:"success",onClick:t[1]||(t[1]=a=>A())},{default:l(()=>[e(K),u("新增")]),_:1}),e(s,{type:"danger",disabled:x.value.length===0,onClick:t[2]||(t[2]=a=>B())},{default:l(()=>[e(U),u("删除")]),_:1},8,["disabled"])])])]),default:l(()=>[Z((F(),z(P,{data:T.value,onSelectionChange:S},{default:l(()=>[e(p,{type:"selection",width:"50",align:"center"}),e(p,{key:"id",label:"编号",align:"center",prop:"id",width:"100"}),e(p,{key:"teacherName",label:"教师名",align:"center",prop:"teacherName"}),e(p,{label:"教师年龄",width:"100",align:"center",prop:"teacherAge"}),e(p,{label:"地址",width:"120",align:"center",prop:"teacherAddress"}),e(p,{label:"操作",fixed:"right",width:"220"},{default:l(a=>[e(s,{type:"primary",link:"",size:"small",onClick:J=>A(a.row.id)},{default:l(()=>[e(M),u("编辑")]),_:2},1032,["onClick"]),e(s,{type:"primary",link:"",size:"small",onClick:J=>B(a.row.id)},{default:l(()=>[e(U),u("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[H,c.value]]),y.value>0?(F(),z(L,{key:0,total:y.value,"onUpdate:total":t[3]||(t[3]=a=>y.value=a),page:i.pageNum,"onUpdate:page":t[4]||(t[4]=a=>i.pageNum=a),limit:i.pageSize,"onUpdate:limit":t[5]||(t[5]=a=>i.pageSize=a),onPagination:_},null,8,["total","page","limit"])):ee("",!0)]),_:1}),e(Q,{title:d.title,modelValue:d.visible,"onUpdate:modelValue":t[9]||(t[9]=a=>d.visible=a),width:"600px","append-to-body":"",onClose:k},{footer:l(()=>[C("div",Ce,[e(s,{type:"primary",onClick:$},{default:l(()=>[u("确 定")]),_:1}),e(s,{onClick:k},{default:l(()=>[u("取 消")]),_:1})])]),default:l(()=>[e(q(N),{ref_key:"teacherFormRef",ref:v,model:o,rules:D,"label-width":"80px"},null,8,["model","rules"]),e(f,{label:"teacher姓名",prop:"teacherName"},{default:l(()=>[e(w,{readonly:!!o.id,modelValue:o.teacherName,"onUpdate:modelValue":t[6]||(t[6]=a=>o.teacherName=a),placeholder:"请输入teacher名"},null,8,["readonly","modelValue"])]),_:1}),e(f,{label:"teacher年龄",prop:"teacherAge"},{default:l(()=>[e(w,{modelValue:o.teacherAge,"onUpdate:modelValue":t[7]||(t[7]=a=>o.teacherAge=a),placeholder:"请输入teacher年龄"},null,8,["modelValue"])]),_:1}),e(f,{label:"地址",prop:"teacherAddress"},{default:l(()=>[e(w,{modelValue:o.teacherAddress,"onUpdate:modelValue":t[8]||(t[8]=a=>o.teacherAddress=a),placeholder:"请输入地址"},null,8,["modelValue"])]),_:1})]),_:1},8,["title","modelValue"])])}}});export{Re as default};
