import{d as h,C as F,a as _,l as w,w as c,f as m,c as b,a4 as r,aq as g,a6 as E,E as P,r as f,K as S,k as M,Q as $}from"./index-6e278e4c.js";/* empty css                */import{a as q,E as A}from"./el-form-item-490b18bc.js";import{E as x}from"./el-icon-dff55afe.js";import{_ as I}from"./plus-791a9653.js";import{u as k,d as C}from"./index-3bb3eff9.js";import{_ as N}from"./_plugin-vue_export-helper-c27b6911.js";import{E as z}from"./el-dialog-7225b063.js";import"./castArray-5e585c79.js";import"./refs-4b7a3a14.js";const L=["src"],R=h({__name:"SingleUpload",props:{modelValue:{type:String,default:""}},emits:["update:modelValue"],setup(v,{emit:d}){const p=v,n=F({get(){return p.modelValue},set(s){d("update:modelValue",s)}});async function o(s){const{data:u}=await k(s.file);n.value=u.url}function t(s){return s.size>2*1048*1048?(E.warning("上传图片不能大于2M"),!1):!0}return(s,u)=>{const V=I,y=P,l=x;return _(),w(l,{class:"single-uploader",modelValue:m(n),"onUpdate:modelValue":u[0]||(u[0]=e=>g(n)?n.value=e:null),"show-file-list":!1,"list-type":"picture-card","before-upload":t,"http-request":o},{default:c(()=>[m(n)?(_(),b("img",{key:0,src:m(n),class:"single"},null,8,L)):(_(),w(y,{key:1,class:"single-uploader-icon"},{default:c(()=>[r(V)]),_:1}))]),_:1},8,["modelValue"])}}});const j=N(R,[["__scopeId","data-v-4e90d1e5"]]),D=["src"],K=h({__name:"MultiUpload",props:{modelValue:{type:Array,default:[]},limit:{type:Number,default:5}},emits:["update:modelValue"],setup(v,{emit:d}){const p=v,n=f(""),o=f(!1),t=f([]);S(()=>p.modelValue,l=>{const e=t.value.map(a=>a.url);e.length>0&&e.length===l.length&&e.every(a=>l.some(i=>i===a))&&l.every(a=>e.some(i=>i===a))||(t.value=l.map(a=>({url:a})))},{immediate:!0});async function s(l){const{data:e}=await k(l.file),a=t.value.findIndex(i=>i.uid==l.file.uid);t.value.splice(a,1,{name:e.name,url:e.url}),d("update:modelValue",t.value.map(i=>i.url))}function u(l){const e=l.url;e&&C(e).then(()=>{d("update:modelValue",t.value.map(a=>a.url))})}function V(l){return l.size>2*1048*1048?(E.warning("上传图片不能大于2M"),!1):!0}const y=l=>{n.value=l.url,o.value=!0};return(l,e)=>{const a=I,i=x,B=z;return _(),b($,null,[r(i,{"file-list":m(t),"onUpdate:fileList":e[0]||(e[0]=U=>g(t)?t.value=U:null),"list-type":"picture-card","before-upload":V,"http-request":s,"on-remove":u,"on-preview":y,limit:p.limit},{default:c(()=>[r(a)]),_:1},8,["file-list","limit"]),r(B,{modelValue:m(o),"onUpdate:modelValue":e[1]||(e[1]=U=>g(o)?o.value=U:null)},{default:c(()=>[M("img",{"w-full":"",src:m(n),alt:"Preview Image"},null,8,D)]),_:1},8,["modelValue"])],64)}}}),Q={class:"app-container"},le=h({__name:"uploader",setup(v){const d=f("https://oss.youlai.tech/default/2022/11/20/18e206dae97b40329661537d1e433639.jpg"),p=f(["https://oss.youlai.tech/default/2022/11/20/8af5567816094545b53e76b38ae9c974.webp","https://oss.youlai.tech/default/2022/11/20/13dbfd7feaf848c2acec2b21675eb9d3.webp"]);return(n,o)=>{const t=q,s=A;return _(),b("div",Q,[r(s,null,{default:c(()=>[r(t,{label:"单图上传"},{default:c(()=>[r(j,{modelValue:m(d),"onUpdate:modelValue":o[0]||(o[0]=u=>g(d)?d.value=u:null)},null,8,["modelValue"])]),_:1}),r(t,{label:"多图上传"},{default:c(()=>[r(K,{modelValue:m(p),"onUpdate:modelValue":o[1]||(o[1]=u=>g(p)?p.value=u:null)},null,8,["modelValue"])]),_:1})]),_:1})])}}});export{le as default};
