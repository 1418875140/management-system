import{d as B,ah as S,a9 as z,r as i,o as F,a as I,c as R,a4 as o,w as d,k as a,t as f,f as t,aw as x,ac as U,a2 as N,ax as T,ay as A,az as D,ad as M}from"./index-6e278e4c.js";/* empty css                */import{E as O}from"./el-tooltip-fc220203.js";import{E as V,a as j}from"./el-form-item-490b18bc.js";import{_ as L}from"./index.vue_vue_type_script_setup_true_lang-813f45ee.js";import{S as _}from"./index-0f835d7e.js";import{_ as P}from"./_plugin-vue_export-helper-c27b6911.js";import"./castArray-5e585c79.js";import"./el-dropdown-item-cbbd96a1.js";import"./dropdown-13ad8af3.js";import"./refs-4b7a3a14.js";const Q={class:"login-container"},Z={class:"flex text-white items-center py-4"},G={class:"text-2xl flex-1 text-center"},H={class:"p-2 text-white"},J={class:"p-2 text-white"},W={class:"p-2 text-white"},X={class:"captcha"},Y=["src"],ee={class:"mt-4 text-white text-sm"},oe={class:"ml-4"},se=B({__name:"index",setup(te){const k=S(),b=z(),g=i(!1),v=i(!1),u=i(!1),w=i(),C=i(V),n=i({username:"admin",password:"123456"}),E={username:[{required:!0,trigger:"blur"}],password:[{required:!0,trigger:"blur",validator:$}],verifyCode:[{required:!0,trigger:"blur"}]};function $(s,e,l){e.length<6?l(new Error("The password can not be less than 6 digits")):l()}function K(s){const{key:e}=s;v.value=e&&e.length===1&&e>="A"&&e<="Z"}function y(){T().then(({data:s})=>{const{verifyCodeBase64:e,verifyCodeKey:l}=s;n.value.verifyCodeKey=l,w.value=e})}function h(){C.value.validate(s=>{s&&(g.value=!0,k.login(n.value).then(()=>{const e=b.query,l=e.redirect??"/",c=Object.keys(e).reduce((m,p)=>(p!=="redirect"&&(m[p]=e[p]),m),{});M.push({path:l,query:c})}).catch(()=>{y()}).finally(()=>{g.value=!1}))})}return F(()=>{y()}),(s,e)=>{const l=A,c=j,m=O,p=D,q=V;return I(),R("div",Q,[o(q,{ref_key:"loginFormRef",ref:C,model:t(n),rules:E,class:"login-form"},{default:d(()=>[a("div",Z,[a("span",G,f(s.$t("login.title")),1),o(L,{style:{color:"#fff"}})]),o(c,{prop:"username"},{default:d(()=>[a("div",H,[o(_,{"icon-class":"user"})]),o(l,{class:"flex-1",ref:"username",size:"large",modelValue:t(n).username,"onUpdate:modelValue":e[0]||(e[0]=r=>t(n).username=r),placeholder:s.$t("login.username"),name:"username"},null,8,["modelValue","placeholder"])]),_:1}),o(m,{disabled:t(v)===!1,content:"Caps lock is On",placement:"right"},{default:d(()=>[o(c,{prop:"password"},{default:d(()=>[a("span",J,[o(_,{"icon-class":"password"})]),o(l,{class:"flex-1",modelValue:t(n).password,"onUpdate:modelValue":e[1]||(e[1]=r=>t(n).password=r),placeholder:"密码",type:t(u)===!1?"password":"input",size:"large",name:"password",onKeyup:[K,x(h,["enter"])]},null,8,["modelValue","type","onKeyup"]),a("span",{class:"mr-2",onClick:e[2]||(e[2]=r=>u.value=!t(u))},[o(_,{"icon-class":t(u)===!1?"eye":"eye-open",class:"text-white cursor-pointer"},null,8,["icon-class"])])]),_:1})]),_:1},8,["disabled"]),o(c,{prop:"verifyCode"},{default:d(()=>[a("span",W,[o(_,{"icon-class":"verify_code"})]),o(l,{modelValue:t(n).verifyCode,"onUpdate:modelValue":e[3]||(e[3]=r=>t(n).verifyCode=r),"auto-complete":"off",placeholder:s.$t("login.verifyCode"),class:"w-[60%]",onKeyup:x(h,["enter"])},null,8,["modelValue","placeholder","onKeyup"]),a("div",X,[a("img",{src:t(w),onClick:y},null,8,Y)])]),_:1}),o(p,{size:"default",loading:t(g),type:"primary",class:"w-full",onClick:U(h,["prevent"])},{default:d(()=>[N(f(s.$t("login.login")),1)]),_:1},8,["loading","onClick"]),a("div",ee,[a("span",null,f(s.$t("login.username"))+": admin",1),a("span",oe,f(s.$t("login.password"))+": 123456",1)])]),_:1},8,["model"])])}}});const _e=P(se,[["__scopeId","data-v-ff0b361b"]]);export{_e as default};
